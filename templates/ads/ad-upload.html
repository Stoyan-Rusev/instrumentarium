{% extends 'common/base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center text-primary mb-4">Upload Your Ad</h2>

    <div class="card shadow-sm p-4 mx-auto" style="max-width: 600px;">
        <form method="post" enctype="multipart/form-data" id="ad-upload-form">
            {% csrf_token %}

            <!-- Title -->
            <div class="mb-3">
                <label class="form-label fw-bold">Title</label>
                {{ form.title }}
                {% if form.title.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.title.errors.as_text|escape }}
                    </div>
                {% endif %}
            </div>

            <!-- Description -->
            <div class="mb-3">
                <label class="form-label fw-bold">Description</label>
                {{ form.description }}
                {% if form.description.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.description.errors.as_text|escape }}
                    </div>
                {% endif %}
            </div>

            <!-- Price -->
            <div class="mb-3">
                <label class="form-label fw-bold">Price (BGN)</label>
                {{ form.price }}
                {% if form.price.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.price.errors.as_text|escape }}
                    </div>
                {% endif %}
            </div>

            <!-- Image -->
            <div class="mb-3">
                <label class="form-label fw-bold">Upload Image</label>
                {{ form.image }}
                {% if form.image.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.image.errors.as_text|escape }}
                    </div>
                {% endif %}
            </div>

            <!-- Condition -->
            <div class="mb-3">
                <label class="form-label fw-bold">Condition</label>
                {{ form.condition }}
                {% if form.condition.errors %}
                    <div class="text-danger small mt-1">
                        {{ form.condition.errors.as_text|escape }}
                    </div>
                {% endif %}
            </div>

            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-success btn-lg px-5" id="submit-button">
                    Upload Ad
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    const form = document.getElementById("ad-upload-form");
    const button = document.getElementById("submit-button");

    form.addEventListener('submit', () => {
        button.disabled = true;
    });
</script>
{% endblock %}